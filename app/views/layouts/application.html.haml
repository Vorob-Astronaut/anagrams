!!!
%html
  %head
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %meta{:charset => "utf-8"}/
    %meta{:content => "IE=edge", "http-equiv" => "X-UA-Compatible"}/
    %meta{:content => "width=device-width, initial-scale=1", :name => "viewport"}/
    %title Butaca
    = stylesheet_link_tag 'base'
    = stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true
    = javascript_include_tag 'base', 'data-turbolinks-track' => true
    = javascript_include_tag 'application', 'data-turbolinks-track' => true

    = csrf_meta_tags
    :javascript
      $(window).scroll(function() {
          if ($(this).scrollTop() >= 180)
          {
             $('.top-navbar').addClass('tm-navbar-small');
             $('#languagebar').css('margin-top','20px');
      	}
      	if ($(this).scrollTop() === 0) {
             $('.top-navbar').removeClass('tm-navbar-small');
             $('#languagebar').css('margin-top','45px');
          }
      	});
  %body.tm-navbar-fixed.tm-article-blog
    .wrapper
      = render "shared/header"
      .container
        - if notice.present?
          .alert.alert-warning.alert-dismissible{role: "alert"}
            %button.close{"aria-label" => "Close", "data-dismiss" => "alert", :type => "button"}
              %span{"aria-hidden" => "true"} ×
            = notice
        - if alert.present?
          .alert.alert-danger.alert-dismissible{role: "alert"}
            %button.close{"aria-label" => "Close", "data-dismiss" => "alert", :type => "button"}
              %span{"aria-hidden" => "true"} ×
            = alert
        = yield
      = render "shared/footer"

:javascript
  var source = new EventSource("/message");
  source.addEventListener('message', function(e){
    $("#livemessage").html('<li>' + e.data + '</li>');
  });
     // you can add different event listeners to
     // process some logic based on the event push
     // from the server to do something unique based
     // users leaving, joining the application or other
     // kinds of events not releated to users.
